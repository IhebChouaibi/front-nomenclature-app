<div class="stepper-container" id="wizard-validation">
  
  <ul class="stepper-nav">
    <li class="stepper-item" 
        [class.active]="currentStep === 1"
        [class.completed]="isStepCompleted(1)"
        [class.error]="currentStep > 1 && !isStepValid(1)">
      <span class="stepper-header">
        <span class="stepper-circle">
          <span class="stepper-number" *ngIf="!isStepCompleted(1)">1</span>
          <span class="icon-[tabler--check] stepper-check-icon" *ngIf="isStepCompleted(1)"></span>
          <span class="icon-[tabler--x] stepper-error-icon" *ngIf="currentStep > 1 && !isStepValid(1)"></span>
        </span>
        <span class="stepper-title">Goods nomenclature information (Fr)</span>
      </span>
      <div class="stepper-line"></div>
    </li>
    
    <li class="stepper-item" 
        [class.active]="currentStep === 2"
        [class.completed]="isStepCompleted(2)"
        [class.error]="currentStep > 2 && !isStepValid(2)">
      <span class="stepper-header">
        <span class="stepper-circle">
          <span class="stepper-number" *ngIf="!isStepCompleted(2)">2</span>
          <span class="icon-[tabler--check] stepper-check-icon" *ngIf="isStepCompleted(2)"></span>
          <span class="icon-[tabler--x] stepper-error-icon" *ngIf="currentStep > 2 && !isStepValid(2)"></span>
        </span>
        <span class="stepper-title">Goods Nomenclature Details (FR)</span>
      </span>
      <div class="stepper-line"></div>
    </li>
    
    <li class="stepper-item" 
        [class.active]="currentStep === 3"
        [class.completed]="isStepCompleted(3)">
      <span class="stepper-header">
        <span class="stepper-circle">
          <span class="stepper-number" *ngIf="!isStepCompleted(3)">3</span>
          <span class="icon-[tabler--check] stepper-check-icon" *ngIf="isStepCompleted(3)"></span>
        </span>
        <span class="stepper-title">Social Links</span>
      </span>
    </li>
  </ul>

  <form class="stepper-form" (ngSubmit)="onSubmit()">
    
    <div class="stepper-step" *ngIf="currentStep === 1" [formGroup]="step1Form">
        
                
        <mat-form-field  class="form-group" appearance="outline">
            <input 
                  formControlName="code" 
                 matInput type="number" 
                  placeholder="Code (FR)*" 
                  class="input"
                  id="code" />
                  <mat-error *ngIf="hasError('code',step1Form)">
                    Le code est requis  </mat-error>
        </mat-form-field>
     
      <mat-form-field class="form-group"  appearance="outline">
          <input 
            formControlName="suffix" 
            matInput type="number" 
            placeholder="suffix" 
            class="input" 
            />
          <mat-error *ngIf="hasError('suffix',step1Form)">
            L'unité est requise
          </mat-error>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
          <input 
            formControlName="statisticalIndicator" 
            matInput type="text" 
            placeholder="Statistical Indicator (FR)" 
            class="input" 
             />
          <mat-error *ngIf="hasError('statisticalIndicator',step1Form)">
            L'unité est requise
          </mat-error>
      </mat-form-field>


      
        
      <mat-form-field class="form-group" appearance="outline">
        <input matInput [matDatepicker]="picker1" formControlName="startDate"placeholder="Choisir une date">
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
        <mat-error *ngIf="hasError('startDate',step1Form)">
          La date de début est requise
        </mat-error>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <input matInput [matDatepicker]="picker2" formControlName="endDate" placeholder="Choisir une date">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
        <mat-error *ngIf="hasError('endDate',step1Form)">
          La date de fin est requise
        </mat-error>
      </mat-form-field>

        
      

      <mat-checkbox formControlName="national" class="checkbox-group">National</mat-checkbox>
      <mat-checkbox formControlName="declarable" class="checkbox-group">Declarable</mat-checkbox>



    </div>

   
    <div class="stepper-step" *ngIf="currentStep === 2" [formGroup]="step2Form">
     <mat-form-field  class="form-group" appearance="outline">
        <input matInput formControlName="description" placeholder="Description (FR)" class="input" />
      </mat-form-field>

      <mat-form-field  class="form-group" appearance="outline">
        <input matInput [matDatepicker]="dp1" formControlName="dateDebut" placeholder="Date de début">
        <mat-datepicker-toggle matSuffix [for]="dp1"></mat-datepicker-toggle>
        <mat-datepicker #dp1></mat-datepicker>
      </mat-form-field>

      <mat-form-field  class="form-group" appearance="outline">
        <input matInput [matDatepicker]="dp2" formControlName="dateFin" placeholder="Date de fin">
        <mat-datepicker-toggle matSuffix [for]="dp2"></mat-datepicker-toggle>
        <mat-datepicker #dp2></mat-datepicker>
      </mat-form-field>

      <mat-form-field  class="form-group" appearance="outline">
        <input matInput formControlName="contenuNote"   placeholder="Contenu de la note" class="input" />
      </mat-form-field>

      <mat-form-field  class="form-group" appearance="outline">
        <input matInput [matDatepicker]="dp3" formControlName="dateDebutNote" placeholder="Date de début de la note">
        <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
        <mat-datepicker #dp3></mat-datepicker>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <input matInput [matDatepicker]="dp4" formControlName="dateFinNote"   placeholder="Date de fin de la note">
        <mat-datepicker-toggle matSuffix [for]="dp4"></mat-datepicker-toggle>
        <mat-datepicker #dp4></mat-datepicker>
      </mat-form-field>
    </div>

    <!-- Step 3 -->
    <div class="stepper-step" *ngIf="currentStep === 3">
      <h3>Step 3 Content</h3>
      <p>Ajoutez ici le contenu du step 3</p>
    </div>

    <div class="stepper-final" *ngIf="currentStep > 3">
      <h3>Your Form has been Submitted</h3>
      <p>Toutes les informations ont été enregistrées avec succès.</p>
    </div>

    <div class="stepper-buttons">
      <button 
        type="button" 
        (click)="previousStep()" 
        class="btn-prev"
        [disabled]="currentStep === 1">
        Back
      </button>
      
      <button 
        type="button" 
        (click)="nextStep()" 
        class="btn-next"
        *ngIf="currentStep < 3">
        Next
      </button>
      
      <button 
         (click)="onSubmit()" 

        class="btn-finish"
        
        *ngIf="currentStep === 3">
        Finish
      </button>
      
      <button 
        type="button" 
        (click)="onReset()" 
        class="btn-reset">
        Reset
      </button>
      
      <button 
        type="button" 
        (click)="onClose()" 
        class="btn-close">
        Close
      </button>
    </div>
  </form>
</div>